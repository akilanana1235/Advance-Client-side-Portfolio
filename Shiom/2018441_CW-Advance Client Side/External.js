var travels = {  
    "resorts": [
        {
            "id":"resort1",
            "destination":"Caribbean",
            "name":"Les Boucaniers",
            "location":"Martinique",
            "comfortLevel":5,
            "activities":["water skiing", "tennis", "scuba diving", "spa"],
            "price":"1254",
            "startDate":"2017-05-05",
            "endDate":"2019-12-31",
            "short_description":"The resort of Les Boucaniers is located on the laid-back beach-covered south coast of the island, and is perfectly placed for Martinique holidays that are both relaxing and awe-inspiring.",
            "picture":"res1pic2.jpg",
            "long_description":"A divers' paradise in the Baie du Marin, a legendary spot.<br>Its bungalows are discreetly lodged in a tropical garden beside the white sand beach in superb Marin Bay. A magical site where you can enjoy a taste of everything, alone or with family or friends. Try water sports and the magnificent Club Med Spa*. You'll be enchanted by the exotic flavours of the local cuisine and the joyful spirit of the Caribbean.",
            "url":"resort1.html"
        },
        {
            "id":"resort2",
            "destination":"Indian Ocean",
            "name":"La Plantation d'Albion",
            "location":"Mauritius",
            "comfortLevel": 4,
            "activities":["kids club","golf", "scuba diving", "tennis",  "spa"],
            "price":"2062",
            "startDate":"2017-01-01",
            "endDate":"2019-11-31",
            "short_description":"Beautifully located in one of the last remote creeks on the island, La Plantation d'Albion Club Med welcomes the most demanding of guests into a world of supreme refinement.",
            "picture":"res2pic1.jpg",
            "long_description":"In a remote beauty spot, savour the luxury of Mauritian lifestyle. <br> The idyllic natural setting is enhanced by the sublime decor designed by Marc Hertrich and Nicolas Adnet, and the Resort's top-end comfort is perfectly reflected in its beautifully spacious rooms. The exceptional CINQ MONDES Spa* and luxurious overflow pool add an ideally Zen touch.<br> The Resort is entirely devoted to fulfilling its guests' desires and offers discreet, personal service in its swimming areas, bars and 'Table Gourmet' restaurants.",
            "url":"resort2.html"
        },
        {
            "id":"resort3",
            "destination":"Indian Ocean",   
            "name":"PearlOf Life",
            "location":"Kytes",
            "comfortLevel": 7,
            "activities":["gaming","boat Ride", "scuba diving", "futsal", "surfing", "spa"],
            "price":"18062",
            "startDate":"2017-02-25",
            "endDate":"2019-05-11",
            "short_description":"Beautifully located in one of the beautifullest  creeks on the island, Pearl of life welcomes the most demanding of guests into a world of supreme refinement.",
            "picture":"res3pic1.jpg",
            "long_description":"In a remote beauty spot, savour the luxury of Kytes lifestyle. <br> The idyllic natural setting is enhanced by the sublime decor designed by Marc Hertrich and Nicolas Adnet, and the Resort's top-end comfort is perfectly reflected in its beautifully spacious rooms. The exce6ptional CINQ MONDES Spa* and luxurious overflow pool add an ideally Zen touch.<br> The Resort is entirely devoted to fulfilling its guests' desires and offers discreet, personal service in its swimming areas, bars and 'Table Gourmet' restaurants.",
            "url":"resort3.html"
        },
        {
            "id":"resort4",
            "destination":"Indian Ocean",   
            "name":"Mariot Vellufushi",
            "location":"Seachelles",
            "comfortLevel": 4,
            "activities":["fishing","swimming", "scuba diving", "jet Skying", "sailing", "surfing"],
            "price":"3062",
            "startDate":"2017-01-11",
            "endDate":"2019-07-18",
            "short_description":"Beautifully located,  border by  one of the beautifullest beaches in the island, Mariot Vellufushi welcomes the most demanding of guests into a world of supreme refinement.",
            "picture":"res4pic1.jpg",
            "long_description":"In a remote beauty spot, savour the luxury of Mariot lifestyle. <br> The idyllic natural setting is enhanced by the sublime decor designed by Marc Hertrich and Nicolas Adnet, and the Resort's top-end comfort is perfectly reflected in its beautifully spacious rooms. The exceptional CINQ MONDES Spa* and luxurious overflow pool add an ideally Zen touch.<br> The Resort is entirely devoted to fulfilling its guests' desires and offers discreet, personal service in its swimming areas, bars and 'Table Gourmet' restaurants.",
            "url":"resort4.html"
        },
        {
            "id":"resort5",
            "destination":"Caribbean",   
            "name":"Sanctuary Cap Cana",
            "location":"Cape Town",
            "comfortLevel": 5,
            "activities":["badminton","golf", "scuba diving", "tennis", "sailing", "spa"],
            "price":"19962",
            "startDate":"2017-01-01",
            "endDate":"2019-12-31",
            "short_description":" Beautifully located over the Pacific Ocean Cap Cana welcomes the most demanding of guests into a world of supreme refinement",
            "picture":"res5pic1.jpg",
            "long_description":"In a remote beauty spot, savour the luxury of Cape Town lifestyle. <br> The idyllic natural setting is enhanced by the sublime decor designed by Marc Hertrich and Nicolas Adnet, and the Resort's top-end comfort is perfectly reflected in its beautifully spacious rooms. The exceptional CINQ MONDES Spa* and luxurious overflow pool add an ideally Zen touch.<br> The Resort is entirely devoted to fulfilling its guests' desires and offers discreet, personal service in its swimming areas, bars and 'Table Gourmet' restaurants.",
            "url":"resort5.html"
        },
        {
            "id":"resort6",
            "destination":"Indonisia",   
            "name":"The Damai",
            "location":"Balli",
            "comfortLevel": "6",
            "activities":["surfing","golf", "football", "beach volley ball", "sailing", "spa"],
            "price":"12000",
            "startDate":"2017-01-21",
            "endDate":"2019-09-21",
            "short_description":"Beautifully located in one of the last remote creeks on the island, La Plantation d'Albion Club Med welcomes the most demanding of guests into a world of supreme refinement.",
            "picture":"res6pic1.jpg",
            "long_description":"In a remote beauty spot, savour the luxury of Balli lifestyle. <br> The idyllic natural setting is enhanced by the sublime decor designed by Marc Hertrich and Nicolas Adnet, and the Resort's top-end comfort is perfectly reflected in its beautifully spacious rooms. The exceptional CINQ MONDES Spa* and luxurious overflow pool add an ideally Zen touch.<br> The Resort is entirely devoted to fulfilling its guests' desires and offers discreet, personal service in its swimming areas, bars and 'Table Gourmet' restaurants.",
            "url":"resort6.html"
        },
        {
            "id":"resort7",
            "destination":"Nevada",   
            "name":"Encore At Wynn Las Vegas",
            "location":"Las Vegas",
            "comfortLevel": "7",
            "activities":["casino","golf", "spa", "tennis", "shopping", "gocart"],
            "price":"7062",
            "startDate":"2017-05-01",
            "endDate":"2019-12-31",
            "short_description":"Beautifully located in the city of Las Vegas, Nevada welcomes the most demanding of guests into a world of supreme refinement.",
            "picture":"res7pic1.jpg",
            "long_description":"In a remote beauty spot, savour the luxury of Mauritian lifestyle. <br> The idyllic natural setting is enhanced by the sublime decor designed by Marc Hertrich and Nicolas Adnet, and the Resort's top-end comfort is perfectly reflected in its beautifully spacious rooms. The exceptional CINQ MONDES Spa* and luxurious overflow pool add an ideally Zen touch.<br> The Resort is entirely devoted to fulfilling its guests' desires and offers discreet, personal service in its swimming areas, bars and 'Table Gourmet' restaurants.",
            "url":"resort7.html"
        }
    ]
}



$(document).ready(function(){
   


    $("#datepicker").datepicker(); // for checkIn date 
    $("#datepicker2").datepicker(); //for check out date
    $("#price").selectmenu(); //to select activities 

// below is for auto complete
    var availableTags = [
     
        "casino",
      "kids club",
      "scuba diving",
      "spa",
      "sailing",
      "tennis",
      "water skiing",
      "fishing",
      "golf",
      "gocart",
      "badminton",
      "surfing",
      "football",
      "beach volley ball",
      "jet Skying",
      "gaming",
      "boat ride",
      "futsal",

    ];
    $("#activities").autocomplete({
      source: availableTags
   
    });


    //Search fundtionality
    $("#searchButton").on("click",function(){

        $(".container1").remove(); //remove images recommending vacations
        $(".container2").remove(); 
        $(".container3").remove();
        $(".container4").remove();
        $(".card").remove();//removing exisiting divs to avoid repeat same resort

       
        var resortName = $("#vacationName").val(); // capturing entered location
        var comfort12 = $("#comfortLevel").val();// capturing entered comfort level
        var activity = $("#activities").val();// capturing entered activities
        var amount = $("#price").val();// capturing entered price
       
        
       
        
        var count=0; //validity of search 

        for(var i in travels.resorts){

           //Only enter destination
            if(( resortName==travels.resorts[i].destination) && (comfort12=="") && (activity=="") && (amount=="")){


                    var div1 = document.createElement("div"); //creating a div
                     div1.className ="card";  //giving the div a class name to apply the styling


                         div1.id=travels.resorts[i].id;
            
        

            div1.innerHTML="<img src="+travels.resorts[i].picture+">"+"<h4><b>"+travels.resorts[i].name+"</b></h4><button><span>&#9829</span></button>"+ "Comfort Level: "+travels.resorts[i].comfortLevel+" " + "<h5>£"+travels.resorts[i].price+"</h5>"
            + "<p>"+travels.resorts[i].short_description+"</p>" +"<a href="+travels.resorts[i].url+">Discover Us</a>"; //puzzling the sections/details to be displayed together


            document.getElementById("searchResult").append(div1);  //adding the corresponding div to the bottom of the search id
            count++;


                
         //Enter all requierd Info
            } else if(resortName!="" && amount!="" && comfort12!="" && activity!=""){

                var dateCheckIn = new Date( $("#datepicker").val());
                var dateCheckOut = new Date($("#datepicker2").val());
                var startD = Date.parse(travels.resorts[i].startDate); 
                var endD = Date.parse(travels.resorts[i].endDate);


            for( var k in travels.resorts[i].activities) {


               if( (comfort12==travels.resorts[i].comfortLevel) && (resortName==travels.resorts[i].destination ) && (activity==travels.resorts[i].activities[k]) && (dateCheckIn>=startD) && (dateCheckIn<=endD) && (dateCheckOut<=endD) && (dateCheckOut>startD) && (dateCheckOut>dateCheckIn)) {
         
                        if(amount==2500){


                            if(  travels.resorts[i].price<5000){

                                var div1 = document.createElement("div");
                                  div1.className ="card"; 


                        div1.id=travels.resorts[i].id;
                        
                    

                        div1.innerHTML="<img src="+travels.resorts[i].picture+">"+"<h4><b>"+travels.resorts[i].name+"</b></h4><button><span>&#9829</span></button>"+ "Comfort Level: "+travels.resorts[i].comfortLevel+" " + "<h5>£"+travels.resorts[i].price+"</h5>"
                        + "<p>"+travels.resorts[i].short_description+"</p>" +"<a href="+travels.resorts[i].url+">Discover Us</a>";


                        document.getElementById("searchResult").append(div1); 
                        count++; 


                            }


                        }else if(amount==7500){

                            if(  10000>travels.resorts[i].price>5000){

                                var div1 = document.createElement("div");
                        div1.className ="card"; 


                        div1.id=travels.resorts[i].id;
                        
                    

                        div1.innerHTML="<img src="+travels.resorts[i].picture+">"+"<h4><b>"+travels.resorts[i].name+"</b></h4><button><span>&#9829</span></button>"+ "Comfort Level: "+travels.resorts[i].comfortLevel+" " + "<h5>£"+travels.resorts[i].price+"</h5>"
                        + "<p>"+travels.resorts[i].short_description+"</p>" +"<a href="+travels.resorts[i].url+">Discover Us</a>";


                        document.getElementById("searchResult").append(div1);  
                        count++;

                            }


                        }else if(amount==12500){

                            if( 15000> travels.resorts[i].price>10000){

                                var div1 = document.createElement("div");
                        div1.className ="card"; 


                        div1.id=travels.resorts[i].id;
                        
                    

                        div1.innerHTML="<img src="+travels.resorts[i].picture+">"+"<h4><b>"+travels.resorts[i].name+"</b></h4><button><span>&#9829</span></button>"+ "Comfort Level: "+travels.resorts[i].comfortLevel+" " + "<h5>£"+travels.resorts[i].price+"</h5>"
                        + "<p>"+travels.resorts[i].short_description+"</p>" +"<a href="+travels.resorts[i].url+">Discover Us</a>";


                        document.getElementById("searchResult").append(div1);  

                        count++;
                            }

                         
                    
                        }else if(amount==17500){

                            if(  travels.resorts[i].price >15000){

                                var div1 = document.createElement("div");
                        div1.className ="card"; 


                        div1.id=travels.resorts[i].id;
                        
                    

                        div1.innerHTML="<img src="+travels.resorts[i].picture+">"+"<h4><b>"+travels.resorts[i].name+"</b></h4><button><span>&#9829</span></button>"+ "Comfort Level: "+travels.resorts[i].comfortLevel+" " + "<h5>£"+travels.resorts[i].price+"</h5>"
                        + "<p>"+travels.resorts[i].short_description+"</p>" +"<a href="+travels.resorts[i].url+">Discover Us</a>";


                        document.getElementById("searchResult").append(div1);  

                        count++;
                                }


                            }
                        }
                    }

                    //Enter only dates and the price

            }else if( resortName=="" && amount!="" && comfort12=="" && activity==""){

                var dateCheckIn = new Date( $("#datepicker").val());
                var dateCheckOut = new Date($("#datepicker2").val());
                var startD = Date.parse(travels.resorts[i].startDate); 
                var endD = Date.parse(travels.resorts[i].endDate);

                if(  (dateCheckIn>=startD) && (dateCheckIn<=endD) && (dateCheckOut<=endD) && (dateCheckOut>startD) && (dateCheckOut>dateCheckIn)) {
         
                    if(amount==2500){


                        if(  travels.resorts[i].price<5000){

                            var div1 = document.createElement("div");
                    div1.className ="card"; 


                    div1.id=travels.resorts[i].id;
                    
                

                    div1.innerHTML="<img src="+travels.resorts[i].picture+">"+"<h4><b>"+travels.resorts[i].name+"</b></h4><button><span>&#9829</span></button>"+ "Comfort Level: "+travels.resorts[i].comfortLevel+" " + "<h5>£"+travels.resorts[i].price+"</h5>"
                    + "<p>"+travels.resorts[i].short_description+"</p>" +"<a href="+travels.resorts[i].url+">Discover Us</a>";


                    document.getElementById("searchResult").append(div1); 
                    count++; 


                        }


                    }else if(amount==7500){

                        if(  10000>travels.resorts[i].price>5000){

                            var div1 = document.createElement("div");
                    div1.className ="card"; 


                    div1.id=travels.resorts[i].id;
                    
                

                    div1.innerHTML="<img src="+travels.resorts[i].picture+">"+"<h4><b>"+travels.resorts[i].name+"</b></h4><button><span>&#9829</span></button>"+ "Comfort Level: "+travels.resorts[i].comfortLevel+" " + "<h5>£"+travels.resorts[i].price+"</h5>"
                    + "<p>"+travels.resorts[i].short_description+"</p>" +"<a href="+travels.resorts[i].url+">Discover Us</a>";


                    document.getElementById("searchResult").append(div1);  
                    count++;

                        }


                    }else if(amount==12500){

                        if( 15000> travels.resorts[i].price>10000){

                            var div1 = document.createElement("div");
                    div1.className ="card"; 


                    div1.id=travels.resorts[i].id;
                    
                

                    div1.innerHTML="<img src="+travels.resorts[i].picture+">"+"<h4><b>"+travels.resorts[i].name+"</b></h4><button><span>&#9829</span></button>"+ "Comfort Level: "+travels.resorts[i].comfortLevel+" " + "<h5>£"+travels.resorts[i].price+"</h5>"
                    + "<p>"+travels.resorts[i].short_description+"</p>" +"<a href="+travels.resorts[i].url+">Discover Us</a>";


                    document.getElementById("searchResult").append(div1);  

                    count++;
                        }

                     
                
                    }else if(amount==17500){

                        if(  travels.resorts[i].price >15000){

                            var div1 = document.createElement("div");
                    div1.className ="card"; 


                    div1.id=travels.resorts[i].id;
                    
                

                    div1.innerHTML="<img src="+travels.resorts[i].picture+">"+"<h4><b>"+travels.resorts[i].name+"</b></h4><button><span>&#9829</span></button>"+ "Comfort Level: "+travels.resorts[i].comfortLevel+" " + "<h5>£"+travels.resorts[i].price+"</h5>"
                    + "<p>"+travels.resorts[i].short_description+"</p>" +"<a href="+travels.resorts[i].url+">Discover Us</a>";


                    document.getElementById("searchResult").append(div1);  

                    count++;
                            }


                        }

                }
               
        }else{

        }
             }

             if(count!=0){
                document.getElementById("result").innerHTML="All results for "+resortName+" ";
             }else{
                document.getElementById("result").innerHTML="No Results Found";
             }
        
        });

    });


    //Add to favourite button
      
$(document).ready(function(){
    $(".aFav ").on("click",function(){

        try{

            $(this).attr('disabled',true); //disabling onced clicked

            var resortIdadd = $(this).closest("p").attr("id"); //getting the id of the div

            var myFavResort = JSON.parse(localStorage.getItem("favRe")); //Creating a key

            var add=1;
            if(myFavResort ==null){

                myFavResort =[]; //creating a an array correspond to the key
                
            }
            if(myFavResort !=null){

               for(var j = 0; j<myFavResort.length; j++){

                if(resortIdadd == myFavResort[j]){
                      
                    alert("Resort is already saved!!");
                    add=0;
                // myFavResort = [];

                }
               }
            }

            if(add!=0){

                alert("Resort is Saved");
                myFavResort.push(resortIdadd);
              localStorage.setItem("favRe",JSON.stringify(myFavResort));
            }
                        
        }

        catch(e){

            if(e==QUOTA_EXCEEDED_ERR){

                console.log("Error:Local storage limit exceede");
            }
            else{
                console.log("Error: saving to local storage");
            }
        }


    });
});



//Remove from favourites button

$(document).ready(function(){
    $(".rFav").on("click",function(){


            $(this).attr('disabled',true);

            var resortIdremove = $(this).closest("p").attr("id");

             myFavResort = JSON.parse(localStorage.getItem("favRe"));

           
            if(myFavResort !=null){

               for(var j = 0; j<myFavResort.length; j++){

                if(resortIdremove == myFavResort[j]){

                    alert("Resort has been removed!!");

                    delete myFavResort[j];
                    localStorage.setItem("favRe",JSON.stringify(myFavResort));

                    myFavResort[j]=[];

                }
            }
        }
        if(myFavResort ==null){

            alert("You have no fav resorts");
        }

    });

});


//View all favourites button 
$(document).ready(function(){
    $(".viewFavs").on("click",function(){

        
        $(".container1").remove();
        $(".container2").remove();
        $(".container3").remove();
        $(".container4").remove();
        $(".card").remove();


        document.getElementById("result").innerHTML="Your Favourite Resorts";
        console.log("getting array data from local storage");
        myFavResort = JSON.parse(localStorage.getItem("favRe"));

        var div2 = document.createElement("div");
        div2.className = "contain";

        if(myFavResort!=null){

            for( var i = 0; i<travels.resorts.length; i++){

                for(j = 0; j<myFavResort.length; j++){

                    if(travels.resorts[i].id == myFavResort[j]){

                       
         
                            var div2 = document.createElement("div");
                            div2.className ="card";
                    
                            div2.innerHTML="<img src="+travels.resorts[i].picture+">"+"<h4><b>"+travels.resorts[i].name+"</b></h4>"+ " &#11088 &#11088 &#11088 &#11088 &#11088 " + "<h5>£"+travels.resorts[i].price+"</h5>"
                            + "<p>"+travels.resorts[i].short_description+"</p>" +"<a href="+travels.resorts[i].url+">Discover Us</a>";
                    
                    
                            document.getElementById("favResorts").append(div2); 
                    
                }

            }
        }
    }

    });

    });
